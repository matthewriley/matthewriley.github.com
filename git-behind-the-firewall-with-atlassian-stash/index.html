
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Git Behind the Firewall with Atlassian Stash - Matthew Riley</title>
  <meta name="author" content="Matthew Riley">

  
  <meta name="description" content="GitHub is the undeniable center of the open source universe. With many millions of repositories GitHub is the place to go when publishing open source &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://matthewriley.us/git-behind-the-firewall-with-atlassian-stash">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/MatthewRileyFeed" rel="alternate" title="Matthew Riley" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<meta name="google-site-verification" content="j59bSm6_HFpRBCUr6gaiftyUErnHU4Be5-un-uRtRF0" />
<meta name="google-site-verification" content="O-QpEzMCc26UTcNN91tQ4XBY8L5UuuAWuaf8hKP3eig" />
<link href="https://plus.google.com/102836134221620620495" rel="me" />
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-5440657-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Matthew Riley</a></h1>
  
    <h2>Web Applications Engineer</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss email">
  <li><a href="http://feeds.feedburner.com/MatthewRileyFeed" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
    <li><a href="https://feedburner.google.com/fb/a/mailverify?uri=MatthewRileyFeed" rel="subscribe-email" title="subscribe via email">Email</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:matthewriley.us" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <!-- <li><a href="/archives">Archives</a></li> -->
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Git Behind the Firewall With Atlassian Stash</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-02-28T00:00:00-07:00" pubdate data-updated="true">Feb 28<span>th</span>, 2013</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>GitHub is the undeniable center of the open source universe. With many millions of repositories GitHub is the place to go when publishing open source software. However if you&#8217;re building software within an enterprise environment, it&#8217;s likely executives are not keen on the idea of making internal code public. And since executives also don&#8217;t like storing that code on a server that they don&#8217;t own and control, <a href="https://github.com/plans">paid GitHub plans</a> are not an option. Executives will want that code managed with some kind of enterprise grade product that runs on a company server and is tied to corporate security and backup policies. In order to accomplish that there are two clear choices: <a href="https://enterprise.github.com/">GitHub Enterprise</a> and <a href="https://www.atlassian.com/software/stash">Atlassian Stash</a>.</p>

<p>Where GitHub Enterprise is basically an internal copy of GitHub running on your server, Stash is a very lightweight web interface for Git repositories. The user interface is very reminiscent of Atlassian&#8217;s <a href="https://bitbucket.org/">Bitbucket</a> so you can easily think of Stash as Bitbucket Lite. Stash wraps your repositories with its security mechanisms allowing you to <a href="https://confluence.atlassian.com/display/STASH/External+user+directories">tie into a user directory</a> of your choice. Stash also gives you <a href="https://confluence.atlassian.com/display/STASH/Using+pull+requests+in+Stash">pull requests</a> and depending upon how you do code reviews, this could be a very powerful feature. In my case, pull requests have become the defacto way of doing code reviews. Since Stash runs on your hardware under Windows or Linux, you can install Stash on a box or VM image already configured to follow your security and backup policies.</p>

<!-- more -->


<p>Stash is a relatively small application so <a href="https://confluence.atlassian.com/display/STASH/Getting+started">installing Stash</a> is as easy as downloading a zip or tar.gz file and extracting it to your server. You then create a separate home directory for stash to store some settings and the repositories. Once that&#8217;s done, you modify a few settings files to tell Stash where everything is and then start up Stash. If you&#8217;re deploying Stash to a production environment you would connect Stash to your user directory, an <a href="https://confluence.atlassian.com/display/STASH/Connecting+Stash+to+an+external+database">external database server</a> and a <a href="https://confluence.atlassian.com/display/STASH/Setting+up+your+mail+server">mail server</a>. Otherwise, at this point Stash is ready for you to start importing your code.</p>

<p>On its own Stash is very lightweight with the minimal functionality required for you to host Git repositories internally. Stash does not have some of the features found with GitHub Enterprise like an issue tracker and a wiki, likely because Atlassian has a separate wiki product with <a href="http://www.atlassian.com/software/confluence">Confluence</a> and an issue tracker with <a href="https://www.atlassian.com/software/jira">Jira</a>. Like all Atlassian products, excellent integration with other Atlassian products is available out of the box. Another common Atlassian feature found in Stash is being able to extend the base functionality with add-ons. Want to see a graph of commits and contributors? <a href="https://marketplace.atlassian.com/plugins/com.stiltsoft.stash.graphs">Awesome Graphs</a> has you covered. Interested in commenting on changeset diffs? <a href="https://marketplace.atlassian.com/plugins/com.appfusions.stash.stash-commenter">Stash Commenter</a> can take care of that. How about a splash of gamification with badges? <a href="https://marketplace.atlassian.com/plugins/nl.stefankohler.stash.badgr">Badgr</a> adds that splash of fun to your repositories.</p>

<p>Repositories in Stash are organized into projects. In my implementation of Stash, I&#8217;ve equated projects to logical teams. The group I work with has all of our repositories under a single project. Permissions are assigned at the project level and with our internal user directory connected, all I need to do is assign our directory group permissions to our project and I&#8217;m done. In order to clone a repo, a user has to supply their username and password and then again for any push or pull from the server. This can become a bit of a pain but Atlassian provides a way to <a href="https://confluence.atlassian.com/display/STASH/Permanently+authenticating+with+Git+repositories">permanently authenticate with the repository</a>.</p>

<p>Permissions are assigned at the project level but it would be nice to see permissions at the repository level. The problem I&#8217;m dealing with right now is with one user not in our directory group that regularly commits to one of our repositories. I either have to add that user to the project level (granting access to all of our repositories) or break that repo out as a separate project (which would change the git URL everyone is already using). Stash has an interesting <a href="https://confluence.atlassian.com/display/STASH/Using+branch+permissions">branch permissions</a> model that admittedly I have not experimented with yet. Branch permissions may provide the security I&#8217;m looking for.</p>

<p>The other permissions issue I have is when it comes to code deployment. Stash currently does not support anonymous access to the Git repositories, even if I set the default project permissions to read only or read and write. That means I have to burn a user license to create a service account that my code deployment server can use. Additionally when I register the Git URL with my deployment server, I have to include the username and password in the Git URL in order for it to work: <code>http://username:password@stash.example.com/scm/AB/repository.git</code>. The security concern here is apparent but since Stash is running behind the firewall, the risk is managed. Atlassian is <a href="https://jira.atlassian.com/browse/STASH-2565">aware of the issue</a> and I hope a future update brings resolution to this.</p>

<p>Speaking of updates, a common concern I have regarding all enterprise software, including Stash, is how those updates are applied. Typically an update is applied by downloading it and then either manually applying the update or running an installer. In the enterprise environments I&#8217;ve worked in, that means filling out paperwork, requesting temporary server access and navigating corporate bureaucracy. The process can take anywhere from a few days to a few weeks and all of this assumes I&#8217;m allowed to install the software in the first place. Otherwise I have to wait for an already very busy server operations group to get to my small update when they can.</p>

<p>I would love it if all Atlassian products included an updater. When an update is available, show a notification with a link to the admin screen. Then give me an option to have the system apply the update itself (just like Chrome and FF) or show a link to download the update and apply it the old fashioned way. I understand there may be major updates that are not backwards compatible forcing a manual update but an updater, at the very least, should be able to deploy all of the point releases for me. Having this kind of functionality would save me days, if not weeks, of headaches and would dramatically reduce the total cost of ownership for all enterprise software, including Stash.</p>

<p>Being a web applications engineer, I&#8217;m always curious to see what other folks are using so I poked around the Stash directory. Stash runs as a Tomcat application but you don&#8217;t need to have Tomcat already installed. Everything is configured out of the box which is always very nice when installing new software. When looking at the application itself, I see RequireJS, AMD modules, jQuery, Backbone, LESS, Closure Templates and undoubtedly far more technology I&#8217;ve missed. A truly impressive technology stack. Additional kudos to the Atlassian engineers that added the nice SVG animated logo on mouseover. A really fun easter egg which I&#8217;m sure was not easy to build.</p>

<p>Often enterprise tools have a bad reputation of being bloated, burdensome and difficult to configure when attempting to navigate a myriad of settings screens. I can confidently say Stash is the exact opposite. With an easy installation, a clean user interface, pull requests and add-ons Stash is, at the very least, worth a close look. And when you look at <a href="https://www.atlassian.com/software/stash/pricing">Atlassian&#8217;s pricing for Stash</a>, it might be worth a small ten user installation. Stash does a great job of providing enough functionality to help you get the job done while staying out of your way. GitHub is certainly the hub for Open Source, but behind your firewall Atlassian makes a very strong case for Stash being the center of your enterprise application code.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Matthew Riley</span></span>

      








  


<time datetime="2013-02-28T00:00:00-07:00" pubdate data-updated="true">Feb 28<span>th</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/categories/atlassian/'>atlassian</a>, <a class='category' href='/categories/enterprise/'>enterprise</a>, <a class='category' href='/categories/git/'>git</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://matthewriley.us/git-behind-the-firewall-with-atlassian-stash" data-via="matthew_riley" data-counturl="http://matthewriley.us/git-behind-the-firewall-with-atlassian-stash" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/vjet-from-ebay-open-source-nodejs-code-assist" title="Previous Post: VJET from eBay Open Source: Node.js Code Assist in Eclipse">&laquo; VJET from eBay Open Source: Node.js Code Assist in Eclipse</a>
      
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    
<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("matthew_riley", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/matthew_riley" class="twitter-follow-button" data-show-count="false">Follow @matthew_riley</a>
  
</section>


<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/102836134221620620495?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/matthewriley">@matthewriley</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'matthewriley',
            count: 4,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/git-behind-the-firewall-with-atlassian-stash">Git Behind the Firewall with Atlassian Stash</a>
      </li>
    
      <li class="post">
        <a href="/vjet-from-ebay-open-source-nodejs-code-assist">VJET from eBay Open Source: Node.js Code Assist in Eclipse</a>
      </li>
    
      <li class="post">
        <a href="/adobe-proto-efficient-wireframing">Adobe Proto: Efficient Wireframing</a>
      </li>
    
      <li class="post">
        <a href="/configuring-a-python-google-app-engine-develo">Configuring a Python Google App Engine Development Environment</a>
      </li>
    
  </ul>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US"><img alt="This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 Unported License." title="This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 Unported License." style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" /></a> -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'matthewrileyus';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://matthewriley.us/git-behind-the-firewall-with-atlassian-stash';
        var disqus_url = 'http://matthewriley.us/git-behind-the-firewall-with-atlassian-stash';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
